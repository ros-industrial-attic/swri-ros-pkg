<launch>

  <arg name="log_to_warehouse" default="false" />

  <include file="$(find armadillo_arm_navigation)/launch/armadillo_planning_environment.launch"/>
  
  <param name="warehouse_host" value="prn2.willowgarage.com"/>
  <param name="warehouse_port" value="27021"/>
  <node if="$(arg log_to_warehouse)" name="mongo" type="wrapper.py" pkg="mongodb">
       <param name="overwrite" value="false"/>
       <param name="database_path" value="arm_navigation_dbs/pr2_manip_db"/>
  </node>

  <include file="$(find planning_environment)/launch/environment_server.launch">
    <arg name="use_collision_map" value="false"/>
  </include>

  <include file="$(find armadillo)/launch/openni.launch"/>
  <!--
  <node machine="c2" pkg="chomp_motion_planner" name="chomp_planner_longrange" type="chomp_planner_node" respawn="false" output="screen">
    <rosparam command="load" file="$(find pr2_arm_navigation_planning)/config/pr2_both_arms_chomp_config.yaml" />
    <param name="animate_path" value="false"/>
    <param name="animate_endeffector" value="false"/>
    <param name="animate_endeffector_segment" value="r_gripper_tool_frame"/>
    <param name="use_signed_environment_field" value="true"/>
    <param name="use_signed_self_field" value="false"/>
    <param name="trajectory_duration" value="5.0"/>
    <param name="trajectory_discretization" value="0.05"/>
    <param name="learning_rate" value="100.0" />
    <param name="max_iterations" value="250"/>
    <param name="max_iterations_after_collision_free" value="5" />
    <param name="smoothness_cost_weight" value="0.00001"/>
    <param name="obstacle_cost_weight" value="1.0" />
    <param name="joint_update_limit" value="0.05" />
    <param name="ridge_factor" value="0.0" />
    <param name="use_pseudo_inverse" value="false" />
    <param name="pseudo_inverse_ridge_factor" value="0.0001" />
    <param name="collision_threshold" value="0.125" />
    <param name="smoothness_cost_velocity" value="0.0" />
    <param name="smoothness_cost_acceleration" value="1.0" />
    <param name="smoothness_cost_jerk" value="0.000000" />
    
    <param name="add_randomness" value="true" />
    <param name="random_jump_amount" value="1.0"/>
    <param name="use_hamiltonian_monte_carlo" value="false" />
    <param name="hmc_discretization" value="0.01" />
    <param name="hmc_stochasticity" value="0.0" />
    <param name="hmc_annealing_factor" value="0.99" />
    
    <param name="use_stochastic_descent" value="false"/>
    
    <rosparam command="load" file="$(find pr2_arm_navigation_config)/config/robot_padding.yaml" />
  </node>
-->
  
  <include file="$(find armadillo_arm_navigation)/launch/ompl_planning.launch"/>  

  <node pkg="trajectory_filter_server" name="trajectory_filter_server" type="trajectory_filter_server" output="screen">
    <rosparam command="load" file="$(find armadillo_arm_navigation)/config/joint_limits.yaml"/>
    <rosparam command="load" file="$(find armadillo_object_manipulation)/config/filters.yaml"/>
  </node>


  <rosparam command="load" file="$(find armadillo)/cfg/armadillo_hand_descriptions.yaml"/>


  <rosparam command="load" file="$(find household_objects_database)/config/wgs36.yaml"/>
  <node pkg="household_objects_database" name="objects_database_node" type="objects_database_node" 
  	respawn="true" output="screen">
    <param name="prune_table_clearance" value="-1.0"/>
  </node>

  <include file="$(find pr2_gripper_grasp_planner_cluster)/launch/robotiq_hand_grasp_planner_cluster_server.launch"/>

  <include file="$(find tabletop_object_detector)/launch/tabletop_segmentation.launch">
    <arg name="tabletop_segmentation_points_in" value="camera/depth/points"/>
  </include>
  <include file="$(find tabletop_object_detector)/launch/tabletop_object_recognition.launch"/>

</launch>
